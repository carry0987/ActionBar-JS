!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).ActionBar=e()}(this,(function(){"use strict";class t{constructor(t){Object.assign(this,t)}static version="2.1.9";static stylesheetId="utils-style";static replaceRule={from:".utils",to:".utils-"};static setStylesheetId(e){t.stylesheetId=e}static setReplaceRule(e,n){t.replaceRule.from=e,t.replaceRule.to=n}static getElem(t,e,n){return"object"==typeof t?t:void 0===e&&void 0===n?isNaN(Number(t))?document.querySelector(t):document.getElementById(t):null===e?void 0===n?document.querySelector(t):n.querySelector(t):"all"===e?void 0===n?document.querySelectorAll(t):n.querySelectorAll(t):"object"==typeof e?e.querySelector(t):null}static createElem(t,e={},n=""){let o=document.createElement(t);for(let t in e)Object.prototype.hasOwnProperty.call(e,t)&&("innerText"===t?o.textContent=e[t]:o.setAttribute(t,e[t]));return n&&o.append(document.createTextNode(n)),o}static insertAfter(e,n){if("string"==typeof n){let e=t.createElem("div");e.innerHTML=n,n=e.firstChild}e.nextSibling?e.parentNode.insertBefore(n,e.nextSibling):e.parentNode.appendChild(n)}static insertBefore(e,n){if("string"==typeof n){let e=t.createElem("div");e.innerHTML=n,n=e.firstChild}e.parentNode.insertBefore(n,e)}static addClass(t,e){return t.classList.add(e),t}static removeClass(t,e){return t.classList.remove(e),t}static toggleClass(t,e){return t.classList.toggle(e),t}static hasClass(t,e){return t.classList.contains(e)}static isObject(t){return t&&"object"==typeof t&&!Array.isArray(t)}static deepMerge(e,...n){if(!n.length)return e;const o=n.shift();if(o)for(const n in o)t.isObject(o[n])?(e[n]||(e[n]={}),t.deepMerge(e[n],o[n])):e[n]=o[n];return t.deepMerge(e,...n)}static injectStylesheet(e,n=null){n=t.isEmpty(n)?"":n;let o=t.createElem("style");o.id=t.stylesheetId+n,o.textContent="",document.head.append(o);let i=o.sheet;for(let o in e)e.hasOwnProperty(o)&&t.compatInsertRule(i,o,t.buildRules(e[o]),n)}static buildRules(t){let e="";for(let[n,o]of Object.entries(t))n=n.replace(/([A-Z])/g,(t=>`-${t[0].toLowerCase()}`)),e+=`${n}:${o};`;return e}static compatInsertRule(e,n,o,i=null){i=t.isEmpty(i)?"":i;let s=n.replace(t.replaceRule.from,t.replaceRule.to+i);e.insertRule(s+"{"+o+"}",0)}static removeStylesheet(e=null){e=t.isEmpty(e)?"":e;let n=t.getElem("#"+t.stylesheetId+e);n&&n.parentNode.removeChild(n)}static isEmpty(t){return"number"!=typeof t&&(!t||"string"==typeof t&&0===t.length)}static createEvent(t,e=null){return new CustomEvent(t,{detail:e})}static dispatchEvent(e,n=null){document.dispatchEvent(t.createEvent(e,n))}static generateRandom(t=8){return Math.random().toString(36).substring(2,2+t)}static setLocalValue(t,e,n=!0){n&&(e=JSON.stringify(e)),window.localStorage.setItem(t,e)}static getLocalValue(e,n=!0){let o=window.localStorage.getItem(e);if(n)try{o=JSON.parse(o)}catch(e){t.reportError("Error while parsing stored json value: ",e)}return o}static removeLocalValue(t){window.localStorage.removeItem(t)}static setSessionValue(t,e,n=!0){n&&(e=JSON.stringify(e)),window.sessionStorage.setItem(t,e)}static getSessionValue(e,n=!0){let o=window.sessionStorage.getItem(e);if(n)try{o=JSON.parse(o)}catch(e){t.reportError("Error while parsing stored json value: ",e)}return o}static removeSessionValue(t){window.sessionStorage.removeItem(t)}static getUrlParameter(t,e=window.location.search){let n=new URLSearchParams(e).get(t);return null===n?null:decodeURIComponent(n)}static async doFetch(t){const{url:e,method:n="GET",headers:o={},body:i=null,beforeSend:s=null,success:l=null,error:r=null}=t;let a={method:n,mode:"cors",headers:o instanceof Headers?o:new Headers(o)};if(null!==i&&["PUT","POST","DELETE"].includes(n.toUpperCase())){let t=i;i instanceof FormData||(t=JSON.stringify(i),a.headers instanceof Headers||(a.headers=new Headers(a.headers)),a.headers.append("Content-Type","application/json")),a.body=t}let c=new Request(e,a);try{const t=await new Promise((t=>{s?.(),t(c)})),e=await fetch(t),n=await e.json();return l?.(n),n}catch(t){throw r?.(t),t}}static appendFormData(e,n=new FormData){const{data:o,parentKey:i=""}=e;if(null!==o&&"object"==typeof o)if(o instanceof Blob||o instanceof File){const t=i||"file";n.append(t,o)}else Object.keys(o).forEach((e=>{const s=o[e],l=i?`${i}[${e}]`:e;null!==s&&"object"==typeof s?t.appendFormData({data:s,parentKey:l},n):null!==s&&n.append(l,String(s))}));else null!==o&&n.append(i,o);return n}static encodeFormData(e,n=""){if(e instanceof FormData)return e;const o={data:e,parentKey:n};return t.appendFormData(o)}static async sendFormData(e){const{url:n,data:o,method:i="POST",success:s,errorCallback:l}=e,r={url:n,method:i,body:t.encodeFormData(o),success:t=>{s&&s(t)},error:t=>{l&&l(t)}};return t.doFetch(r).then((()=>!0)).catch((()=>!1))}static reportError(...t){console.error(...t)}static throwError(t){throw new Error(t)}}Object.defineProperty(t,"version",{writable:!1,configurable:!0}),t.setStylesheetId="actionbar-style",t.setReplaceRule(".action-bar",".action-bar-"),t.getTemplate=function(e,n){let o=`\n    <div style="display:none">\n        <div class="action-bar action-bar-${n}">\n            <div class="selected-count"></div>\n            <div class="action-buttons">\n                <button class="action-button clear" title="Clear" aria-label="Clear Selection">\n                    <svg width="24px" height="24px" viewBox="0 0 24 24">\n                        <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"></path>\n                    </svg>\n                </button>\n                <button class="action-button selectAll" title="SelectAll" aria-label="Select All">\n                    <svg width="22px" height="22px" viewBox="0 0 448 512">\n                        <path d="M400 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V80c0-26.51-21.49-48-48-48zm0 400H48V80h352v352zm-35.864-241.724L191.547 361.48c-4.705 4.667-12.303 4.637-16.97-.068l-90.781-91.516c-4.667-4.705-4.637-12.303.069-16.971l22.719-22.536c4.705-4.667 12.303-4.637 16.97.069l59.792 60.277 141.352-140.216c4.705-4.667 12.303-4.637 16.97.068l22.536 22.718c4.667 4.706 4.637 12.304-.068 16.971z"></path>\n                    </svg>\n                </button>\n                <button class="action-button restore" title="Restore" aria-label="Restore">\n                    <svg width="24px" height="24px" viewBox="0 0 1024 1024">\n                        <path d="M512 768q88 0 151-63t63-151-63-150-151-62q-116 0-180 98l-54-56v170h170l-68-68q16-32 55-56t77-24q62 0 106 43t44 105-44 106-106 44q-78 0-122-64h-74q24 58 77 93t119 35zM598 86l256 256v512q0 34-26 59t-60 25h-512q-34 0-60-25t-26-59l2-684q0-34 25-59t59-25h342z"></path>\n                    </svg>\n                </button>\n                <button class="action-button move" title="Move" aria-label="Move">\n                    <svg width="24px" height="24px" viewBox="0 0 24 24">\n                        <path fill="none" d="M0 0h24v24H0V0z"></path>\n                        <path d="M20 6h-8l-2-2H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2zm0 12H4V8h16v10zm-8.01-9l-1.41 1.41L12.16 12H8v2h4.16l-1.59 1.59L11.99 17 16 13.01 11.99 9z"></path>\n                    </svg>\n                </button>\n                <button class="action-button delete" title="Delete" aria-label="Delete">\n                    <svg width="24px" height="24px" viewBox="0 0 24 24">\n                        <path d="M15 4V3H9v1H4v2h1v13c0 1.1.9 2 2 2h10c1.1 0 2-.9 2-2V6h1V4h-5zm2 15H7V6h10v13zM9 8h2v9H9zm4 0h2v9h-2z"></path>\n                    </svg>\n                </button>\n            </div>\n        </div>\n    </div>\n    `;if(e){let i=t.getElem(e);i&&0!==i.length||throwError("Template not found"),o=`<div style="display:none"><div class="action-bar action-bar-${n}">`,o+=i.innerHTML,o+="</div></div>"}return o},t.modifyButtonState=function(e,n,o){(e=Array.isArray(e)?e:[e]).forEach((e=>{let i=t.getElem(".action-button."+e,o)||null;i&&(i.disabled=n)}))},t.addCustomButton=function(t,e,n,o){"function"!=typeof n&&throwError("callback should be a function");const i=document.createElement("button");i.className=`action-button custom ${t}`,i.title=t,i.innerHTML=e,o.appendChild(i),i.addEventListener("click",(()=>{"none"!==i.style.display&&n(i)}))};class e{constructor(t={}){this.init(t,e.instance.length),e.instance.push(this),1===e.instance.length&&function(t,e=!1){!0===e?console.log("Data Type : "+typeof t,"\nValue : "+t):"boolean"!=typeof e?console.log(e):console.log(t)}(`ActionBar is loaded, version: ${e.version}`)}static defaultOption={countMsg:"Selected (:num) items",countPlaceholder:"(:num)",hideButton:[],template:null,styles:{},customButton:[],onLoad:null,onClear:null,onSelectAll:null,onRestore:null,onMove:null,onDelete:null};static instance=[];static version="1.2.6";static get CLEAR(){return"clear"}static get SELECT_ALL(){return"selectAll"}static get RESTORE(){return"restore"}static get MOVE(){return"move"}static get DELETE(){return"delete"}init(n,o){let i,s,l={};if(this.id=o,this.option=t.deepMerge({},e.defaultOption,n),i=t.getTemplate(this.option?.template,o),this.option?.styles&&Object.keys(this.option.styles).length>0){let e=t.deepMerge({},this.option.styles);t.injectStylesheet(e,o)}if(t.getElem(".action-bar-container")||document.body.insertAdjacentHTML("beforeend",'<div class="action-bar-container"></div>'),s=t.getElem(".action-bar-container"),s.insertAdjacentHTML("beforeend",i),this.element=t.getElem(".action-bar-"+o),this.option?.onLoad&&this.option.onLoad(),l.clear=t.getElem(".action-button.clear",this.element),l.selectAll=t.getElem(".action-button.selectAll",this.element),l.restore=t.getElem(".action-button.restore",this.element),l.move=t.getElem(".action-button.move",this.element),l.delete=t.getElem(".action-button.delete",this.element),this.option?.hideButton&&this.option.hideButton.length>0){(Array.isArray(this.option.hideButton)?this.option.hideButton:[this.option.hideButton]).forEach((t=>{l[t]&&(l[t].style.display="none")}))}if(l.clear.addEventListener("click",(()=>{"none"!==l.clear.style.display&&this.option?.onClear&&this.option.onClear(l.clear)})),l.selectAll.addEventListener("click",(()=>{"none"!==l.selectAll.style.display&&this.option?.onSelectAll&&this.option.onSelectAll(l.selectAll)})),l.restore.addEventListener("click",(()=>{"none"!==l.restore.style.display&&this.option?.onRestore&&this.option.onRestore(l.restore)})),l.move.addEventListener("click",(()=>{"none"!==l.move.style.display&&this.option?.onMove&&this.option.onMove(l.move)})),l.delete.addEventListener("click",(()=>{"none"!==l.delete.style.display&&this.option?.onDelete&&this.option.onDelete(l.delete)})),this.option?.customButton&&this.option.customButton.length>0){let e=t.getElem(".action-buttons",this.element);this.option.customButton.forEach((({name:n,icon:o,callback:i})=>{t.addCustomButton(n,o,i,e),this.option?.hideButton.includes(n)&&(l.style.display="none")}))}return this}target(){return this.element}show(){const t=this.element;return t&&(t.parentNode.style.display="block"),this}hide(){const t=this.element;return t&&(t.parentNode.style.display="none"),this}updateCountNumber(e){let n=t.getElem(".selected-count",this.element),o=this.option.countMsg,i=this.option.countPlaceholder;return n&&(n.innerHTML=o.replace(i,e)),this}enableButton(e){return t.modifyButtonState(e,!1,this.element),this}disableButton(e){return t.modifyButtonState(e,!0,this.element),this}doAction(t){switch(t){case e.CLEAR:this.option?.onClear&&this.option.onClear();break;case e.SELECT_ALL:this.option?.onSelectAll&&this.option.onSelectAll();break;case e.RESTORE:this.option?.onRestore&&this.option.onRestore();break;case e.MOVE:this.option?.onMove&&this.option.onMove();break;case e.DELETE:this.option?.onDelete&&this.option.onDelete()}return this}onClear(t){return this.option.onClear=t,this}onSelectAll(t){return this.option.onSelectAll=t,this}onRestore(t){return this.option.onRestore=t,this}onMove(t){return this.option.onMove=t,this}onDelete(t){return this.option.onDelete=t,this}getButtonList(){return[e.CLEAR,e.SELECT_ALL,e.RESTORE,e.MOVE,e.DELETE]}destroy(){t.removeStylesheet(this.id);let n=t.getElem(".action-bar-container");return n&&n.removeChild(this.element.parentNode),e.instance.splice(this.id,1),this}}return e}));
