!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).ActionBar=e()}(this,(function(){"use strict";function t(t){throw new Error(t)}var e=Object.freeze({__proto__:null,reportError:function(...t){console.error(...t)},throwError:t});function n(t,e,n){if("string"!=typeof t)return t;let o=document;return null===e&&n?o=n:e&&e instanceof Node&&"querySelector"in e?o=e:n&&n instanceof Node&&"querySelector"in n&&(o=n),"all"===e?o.querySelectorAll(t):o.querySelector(t)}function o(t,e={},n=""){let o=document.createElement(t);for(let t in e)Object.prototype.hasOwnProperty.call(e,t)&&("textContent"===t||"innerText"===t?o.textContent=e[t]:o.setAttribute(t,e[t]));return n&&(o.textContent=n),o}var i=Object.freeze({__proto__:null,addClass:function(t,e){return t.classList.add(e),t},createElem:o,getElem:n,hasClass:function(t,e){return t.classList.contains(e)},insertAfter:function(e,n){if("string"==typeof n){let e=o("div");e.innerHTML=n,(n=e.firstChild)||t("The new node (string) provided did not produce a valid DOM element.")}e.parentNode.insertBefore(n,e.nextSibling)},insertBefore:function(e,n){if("string"==typeof n){let e=o("div");e.innerHTML=n,(n=e.firstChild)||t("The new node (string) provided did not produce a valid DOM element.")}e.parentNode.insertBefore(n,e)},removeClass:function(t,e){return t.classList.remove(e),t},toggleClass:function(t,e){return t.classList.toggle(e),t}});let l="utils-style";const s={from:".utils",to:".utils-"};function r(t,...e){if(!e.length)return t;const n=e.shift();if(n)for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e)){const i=n[e],l=e;"object"!=typeof(o=i)||null===o||Array.isArray(o)?t[l]=i:(t[l]&&"object"==typeof t[l]||(t[l]={}),r(t[l],i))}var o;return r(t,...e)}function a(t){l=t}function c(t,e){s.from=t,s.to=e}function h(t,e=null){e=f(e)?"":e;let n=o("style");n.id=l+e,n.textContent="",document.head.append(n);let i=n.sheet;for(let n in t)t.hasOwnProperty(n)&&d(i,n,u(t[n]),e)}function u(t){let e="";for(let[n,o]of Object.entries(t))n=n.replace(/([A-Z])/g,(t=>`-${t[0].toLowerCase()}`)),e+=`${n}:${o};`;return e}function d(t,e,n,o=null){o=f(o)?"":o;let i=e.replace(s.from,s.to+o);t.insertRule(i+"{"+n+"}",0)}function p(t=null){t=f(t)?"":t;let e=n("#"+l+t);e&&e.parentNode.removeChild(e)}function f(t){return"number"!=typeof t&&(!t||"string"==typeof t&&0===t.length)}class m{static setStylesheetId=a;static setReplaceRule=c;static deepMerge=r;static injectStylesheet=h;static removeStylesheet=p;static getElem=i.getElem;static getTemplate=function(t,n){let o=`\n        <div style="display:none">\n            <div class="action-bar action-bar-${n}">\n                <div class="selected-count"></div>\n                <div class="action-buttons">\n                    <button class="action-button clear" title="Clear" aria-label="Clear Selection">\n                        <svg width="24px" height="24px" viewBox="0 0 24 24">\n                            <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"></path>\n                        </svg>\n                    </button>\n                    <button class="action-button selectAll" title="SelectAll" aria-label="Select All">\n                        <svg width="22px" height="22px" viewBox="0 0 448 512">\n                            <path d="M400 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V80c0-26.51-21.49-48-48-48zm0 400H48V80h352v352zm-35.864-241.724L191.547 361.48c-4.705 4.667-12.303 4.637-16.97-.068l-90.781-91.516c-4.667-4.705-4.637-12.303.069-16.971l22.719-22.536c4.705-4.667 12.303-4.637 16.97.069l59.792 60.277 141.352-140.216c4.705-4.667 12.303-4.637 16.97.068l22.536 22.718c4.667 4.706 4.637 12.304-.068 16.971z"></path>\n                        </svg>\n                    </button>\n                    <button class="action-button restore" title="Restore" aria-label="Restore">\n                        <svg width="24px" height="24px" viewBox="0 0 1024 1024">\n                            <path d="M512 768q88 0 151-63t63-151-63-150-151-62q-116 0-180 98l-54-56v170h170l-68-68q16-32 55-56t77-24q62 0 106 43t44 105-44 106-106 44q-78 0-122-64h-74q24 58 77 93t119 35zM598 86l256 256v512q0 34-26 59t-60 25h-512q-34 0-60-25t-26-59l2-684q0-34 25-59t59-25h342z"></path>\n                        </svg>\n                    </button>\n                    <button class="action-button move" title="Move" aria-label="Move">\n                        <svg width="24px" height="24px" viewBox="0 0 24 24">\n                            <path fill="none" d="M0 0h24v24H0V0z"></path>\n                            <path d="M20 6h-8l-2-2H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2zm0 12H4V8h16v10zm-8.01-9l-1.41 1.41L12.16 12H8v2h4.16l-1.59 1.59L11.99 17 16 13.01 11.99 9z"></path>\n                        </svg>\n                    </button>\n                    <button class="action-button delete" title="Delete" aria-label="Delete">\n                        <svg width="24px" height="24px" viewBox="0 0 24 24">\n                            <path d="M15 4V3H9v1H4v2h1v13c0 1.1.9 2 2 2h10c1.1 0 2-.9 2-2V6h1V4h-5zm2 15H7V6h10v13zM9 8h2v9H9zm4 0h2v9h-2z"></path>\n                        </svg>\n                    </button>\n                </div>\n            </div>\n        </div>\n        `;if(t){let l=i.getElem(t);l&&0!==l.length||e.throwError("Template not found"),o=`<div style="display:none"><div class="action-bar action-bar-${n}">`,o+=l.innerHTML,o+="</div></div>"}return o};static modifyButtonState=function(t,e,n){(t=Array.isArray(t)?t:[t]).forEach((t=>{let o=i.getElem(".action-button."+t,n)||null;o&&(o.disabled=e)}))};static addCustomButton=function(t,n,o,l){"function"!=typeof o&&e.throwError("callback should be a function");const s=i.createElem("button");s.className=`action-button custom ${t}`,s.title=t,s.innerHTML=n,l.appendChild(s),s.addEventListener("click",(()=>{"none"!==s.style.display&&o(s)}))}}m.setStylesheetId("actionbar-style"),m.setReplaceRule(".action-bar",".action-bar-");class v{constructor(t={}){this.init(t,v.instance.length),v.instance.push(this),1===v.instance.length&&function(t,e=!1){!0===e?console.log("Data Type : "+typeof t,"\nValue : "+t):"boolean"!=typeof e?console.log(e):console.log(t)}(`ActionBar is loaded, version: ${v.version}`)}static defaultOption={countMsg:"Selected (:num) items",countPlaceholder:"(:num)",hideButton:[],template:null,styles:{},customButton:[],onLoad:null,onClear:null,onSelectAll:null,onRestore:null,onMove:null,onDelete:null};static instance=[];static version="1.2.7";static get CLEAR(){return"clear"}static get SELECT_ALL(){return"selectAll"}static get RESTORE(){return"restore"}static get MOVE(){return"move"}static get DELETE(){return"delete"}init(t,e){let n,o,i={};if(this.id=e,this.option=m.deepMerge({},v.defaultOption,t),n=m.getTemplate(this.option?.template,e),this.option?.styles&&Object.keys(this.option.styles).length>0){let t=m.deepMerge({},this.option.styles);m.injectStylesheet(t,e)}if(m.getElem(".action-bar-container")||document.body.insertAdjacentHTML("beforeend",'<div class="action-bar-container"></div>'),o=m.getElem(".action-bar-container"),o.insertAdjacentHTML("beforeend",n),this.element=m.getElem(".action-bar-"+e),this.option?.onLoad&&this.option.onLoad(),i.clear=m.getElem(".action-button.clear",this.element),i.selectAll=m.getElem(".action-button.selectAll",this.element),i.restore=m.getElem(".action-button.restore",this.element),i.move=m.getElem(".action-button.move",this.element),i.delete=m.getElem(".action-button.delete",this.element),this.option?.hideButton&&this.option.hideButton.length>0){(Array.isArray(this.option.hideButton)?this.option.hideButton:[this.option.hideButton]).forEach((t=>{i[t]&&(i[t].style.display="none")}))}if(i.clear.addEventListener("click",(()=>{"none"!==i.clear.style.display&&this.option?.onClear&&this.option.onClear(i.clear)})),i.selectAll.addEventListener("click",(()=>{"none"!==i.selectAll.style.display&&this.option?.onSelectAll&&this.option.onSelectAll(i.selectAll)})),i.restore.addEventListener("click",(()=>{"none"!==i.restore.style.display&&this.option?.onRestore&&this.option.onRestore(i.restore)})),i.move.addEventListener("click",(()=>{"none"!==i.move.style.display&&this.option?.onMove&&this.option.onMove(i.move)})),i.delete.addEventListener("click",(()=>{"none"!==i.delete.style.display&&this.option?.onDelete&&this.option.onDelete(i.delete)})),this.option?.customButton&&this.option.customButton.length>0){let t=m.getElem(".action-buttons",this.element);this.option.customButton.forEach((({name:e,icon:n,callback:o})=>{m.addCustomButton(e,n,o,t),this.option?.hideButton.includes(e)&&(i.style.display="none")}))}return this}target(){return this.element}show(){const t=this.element;return t&&(t.parentNode.style.display="block"),this}hide(){const t=this.element;return t&&(t.parentNode.style.display="none"),this}updateCountNumber(t){let e=m.getElem(".selected-count",this.element),n=this.option.countMsg,o=this.option.countPlaceholder;return e&&(e.innerHTML=n.replace(o,t)),this}enableButton(t){return m.modifyButtonState(t,!1,this.element),this}disableButton(t){return m.modifyButtonState(t,!0,this.element),this}doAction(t){switch(t){case v.CLEAR:this.option?.onClear&&this.option.onClear();break;case v.SELECT_ALL:this.option?.onSelectAll&&this.option.onSelectAll();break;case v.RESTORE:this.option?.onRestore&&this.option.onRestore();break;case v.MOVE:this.option?.onMove&&this.option.onMove();break;case v.DELETE:this.option?.onDelete&&this.option.onDelete()}return this}onClear(t){return this.option.onClear=t,this}onSelectAll(t){return this.option.onSelectAll=t,this}onRestore(t){return this.option.onRestore=t,this}onMove(t){return this.option.onMove=t,this}onDelete(t){return this.option.onDelete=t,this}getButtonList(){return[v.CLEAR,v.SELECT_ALL,v.RESTORE,v.MOVE,v.DELETE]}destroy(){m.removeStylesheet(this.id);let t=m.getElem(".action-bar-container");return t&&t.removeChild(this.element.parentNode),v.instance.splice(this.id,1),this}}return v}));
